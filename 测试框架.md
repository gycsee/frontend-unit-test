# 测试框架

## 目录

- [测试框架](#%e6%b5%8b%e8%af%95%e6%a1%86%e6%9e%b6)
  - [目录](#%e7%9b%ae%e5%bd%95)
  - [选择测试框架](#%e9%80%89%e6%8b%a9%e6%b5%8b%e8%af%95%e6%a1%86%e6%9e%b6)
  - [主流测试框架](#%e4%b8%bb%e6%b5%81%e6%b5%8b%e8%af%95%e6%a1%86%e6%9e%b6)
    - [Jest](#jest)
    - [Mocha](#mocha)
    - [Jasmine](#jasmine)
    - [AVA](#ava)
    - [Tape](#tape)
  - [总结](#%e6%80%bb%e7%bb%93)
  - [辅助工具](#%e8%be%85%e5%8a%a9%e5%b7%a5%e5%85%b7)
    - [Karma](#karma)
    - [Enzyme](#enzyme)

## 选择测试框架

* 断言(Assertions)：用于判断结果是否符合预期。有些框架需要单独的断言库
* 适合 TDD / BDD：是否适合 测试驱动型 / 行为驱动型 的测试风格
* 异步测试：有些框架对异步测试支持良好
* 使用的语言：大部分 js 测试框架使用 js
* 用于特定目的：每个框架可能会擅长处理不同的问题
* 社区是否活跃

## 主流测试框架

### Jest

* facebook 坐庄
* 基于 Jasmine 至今已经做了大量修改添加了很多特性
* 开箱即用配置少，API简单
* 支持断言和仿真
* 支持快照测试
* 在隔离环境下测试
* 互动模式选择要测试的模块
* 优雅的测试覆盖率报告，基于Istanbul
* 智能并行测试(参考)
* 较新，社区不十分成熟
* 全局环境，比如 describe 不需要引入直接用
* 较多用于 React 项目(但广泛支持各种项目)

### Mocha

* 灵活(不包括断言和仿真，自己选对应工具)
* 流行的选择：chai，sinon
* 社区成熟用的人多，测试各种东西社区都有示例
* 需要较多配置
* 可以使用快照测试，但依然需要额外配置

### Jasmine

* 开箱即用(带有 assertions(断言)，spies (用来模拟函数的执行环境)，和 mocks (mock 工具))
* 全局环境
* 比较'老',坑基本都有人踩过了

### AVA

* 异步、并发运行测试，性能好
* 简约，清晰
* 快照测试和断言需要三方支持

### Tape

* 体积最小，只提供最关键的东西
* 对比其他框架，只提供最底层的 API

## 总结

Mocha 用的人最多，社区最成熟，灵活，可配置性强易拓展，Jest 开箱即用，里边啥都有提供全面的方案，Tape 最精简，提供最基础的东西最底层的API。

* 如果你要求有一个广泛的 API 和特定 (可能独一无二) 的功能那么 Mocha 可能会是你的选择 因为可扩展性就在那里
* AVA 或者 Tape 会给你最低的环境要求。非常好地为你提供一个坚实的最基础环境让你能快速开展测试
* 如果你有一个大项目, 或者想快速开始不需要太多配置，那么 Jest 将会是一个很好的选择

## 辅助工具

### Karma

Karma是由Google团队开发的一套前端测试运行框架。它不同于测试框架（例如jasmine，mocha等），运行在这些测试框架之上。主要完成一下工作：

* Karma启动一个web服务器，生成包含js源代码和js测试脚本的页面
* 运行浏览器加载页面，并显示测试的结果
* 如果开启检测，则当文件有修改时，执行继续执行以上过程

相关文档

* [使用Karma运行JavaScript测试](http://icodeit.org/2013/10/using-karma-as-the-javascript-test-runner/)
* [Karma和Jasmine自动化单元测试](http://blog.fens.me/nodejs-karma-jasmine/)

### Enzyme
